<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>环球喵探</title>
    <style>
      body { margin: 0; }
      
      /* 加载界面样式 */
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 999999;
        transition: opacity 0.5s ease;
      }
      
      #progress-container {
        width: 300px;
        height: 20px;
        border: 2px solid #333;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 20px;
      }
      
      #progress {
        height: 100%;
        width: 0%;
        background: #4CAF50;
        transition: width 0.3s ease;
      }
      
      #loading-text {
        font-family: Arial, sans-serif;
        font-size: 20px;
        color: #333;
      }
      
      /* 错误提示样式 */
      #error-message {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 999999;
        padding: 20px;
        text-align: center;
      }
      
      #error-message h3 {
        color: #ff4444;
        font-size: 24px;
        margin-bottom: 10px;
      }
      
      #error-message p {
        color: #333;
        font-size: 18px;
        max-width: 600px;
      }
    </style>
    <!-- 引入 Three.js ES Modules 版本 -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>
  </head>
  <body>
    <!-- 加载界面 -->
    <div id="loading-screen">
      <div id="loading-text">加载中... 0%</div>
      <div id="progress-container">
        <div id="progress"></div>
      </div>
    </div>
    
    <!-- 错误提示界面 -->
    <div id="error-message">
      <h3>无法运行应用</h3>
      <p>请使用支持 ES Modules 的现代浏览器，并通过本地服务器运行（如 VS Code Live Server）。直接打开本地文件（file:// 协议）会受到浏览器安全限制。</p>
    </div>
    
    <!-- 保持模块类型，使用正确的模块引入 -->
    <script type="module" src="src/main.js"></script>
  </body>
</html>